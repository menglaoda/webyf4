<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			*{
				margin: 0;
				padding: 0;
			}
			.box{
				width: 300px;
				height: 300px;
				border: solid 10px black;
				margin: 50px auto;
				position: relative;
			}
			.boxred,.boxblue{
				width: 30px;
				height: 30px;
				background: red;
				position: absolute;
				top: 20px;
				left: 20px;
			}
			.boxblue{
				background: blue;
				left: 220px;
			}
		</style>
		<script type="text/javascript">
			window.onload = function(){
				var box = document.querySelector(".box");
				var boxred = document.querySelector(".boxred");
				var boxblue = document.querySelector(".boxblue");
				var x1 = Math.ceil(Math.random()*3);
				var y1 = Math.ceil(Math.random()*3);
				var x2 = Math.ceil(Math.random()*3);
				var y2 = Math.ceil(Math.random()*3);
				var timer = setInterval(function(){
					//获取当前位置
					var redx = boxred.offsetLeft;
					var redy = boxred.offsetTop;
					var bluex = boxblue.offsetLeft;
					var bluey = boxblue.offsetTop;
					
					//是否碰到下边框			
					if(redy>=box.clientHeight-boxred.offsetHeight){
						boxred.style.top=box.clientHeight-boxred.offsetHeight+"px";
						y1=-Math.ceil(Math.random()*3);
						
					}
					//是否碰到上边框			
					if(redy<=0){
						boxred.style.top=0+"px";
						y1=Math.ceil(Math.random()*3);
						
					}
					//碰到右边框
					if(redx>=box.clientWidth-boxred.offsetWidth){
						boxred.style.left=box.clientWidth-boxred.offsetWidth+"px";
						x1=-Math.ceil(Math.random()*3);
					}
					//碰到左边框
					if(redx<=0){
						boxred.style.left=0+"px";
						x1=Math.ceil(Math.random()*3);
					}
					
					//是否碰到下边框			
					if(bluey>=box.clientHeight-boxblue.offsetHeight){
						boxblue.style.top=box.clientHeight-boxblue.offsetHeight+"px";
						y2=-Math.ceil(Math.random()*3);
						
					}
					//是否碰到上边框			
					if(bluey<=0){
						boxblue.style.top=0+"px";
						y2=Math.ceil(Math.random()*3);
						
					}
					//碰到右边框
					if(bluex>=box.clientWidth-boxblue.offsetWidth){
						boxblue.style.left=box.clientWidth-boxblue.offsetWidth+"px";
						x2=-Math.ceil(Math.random()*3);
					}
					//碰到左边框
					if(bluex<=0){
						boxblue.style.left=0+"px";
						x2=Math.ceil(Math.random()*3);
					}
					
					//判断两球相撞
					if(Math.abs(redx-bluex)<=boxred.offsetWidth && Math.abs(redy-bluey)<=boxred.offsetHeight){
						if(redx<bluex ){
							console.log("红-右");
							boxred.style.left=bluex-boxblue.offsetWidth+"px";
							x1*=-1;
							x2*=-1;
						}else if(redx>bluex ){
							console.log("红-左");
							boxred.style.left=bluex+boxblue.offsetWidth+"px";
							x1*=-1;
							x2*=-1;
						}else if(redy<bluey){
							console.log("红-下");
							boxred.style.top=bluey-boxblue.offsetHeight+"px";
							y1*=-1;
							y2*=-1;
						}else{
							console.log("红-上");
							boxred.style.top=bluey+boxblue.offsetHeight+"px";
							y1*=-1;
							y2*=-1;
						}
						clearInterval(timer)
					}
					boxred.style.top = redy+y1+"px";
					boxred.style.left = redx+x1+"px";
					boxblue.style.top = bluey+y2+"px";
					boxblue.style.left = bluex+x2+"px";
					

					
					
				},10);
			}
		</script>
	</head>
	<body>
		<div class="box">
			<div class="boxred"></div>
			<div class="boxblue"></div>
		</div>
	</body>
</html>
